<html>
	<p id="readingList" style="font-size: 24px;"></p>

	<script src="2YearBibleChronological.js"></script>
	
	<script>
		const maxExpiration = 1000; // looks like chrome will not allow more than 7 day expiration on cookie. However my browser on my phone may allow more.
		var readingLocation = -1;
		if (readCookie('readingLocation') == null) {
			alert('no cookie found');
			createCookie("readingLocation",-1,maxExpiration);	
		} else {
			readingLocation = readCookie("readingLocation");
			// create the cookie again so that the expiration date is reset
			createCookie("readingLocation",readingLocation,maxExpiration);	
		}	

		// build the checkboxes	
		let checkboxes = "";
		readings.forEach(buildCheckboxes);
		document.getElementById("readingList").innerHTML = checkboxes;

		function buildCheckboxes(value,index) {
			if (index > readingLocation) {
				checkboxes += '<br><input type="checkbox" id="reading' + index + '" name="reading' + index + '" value="' + value + '" onclick="checkboxClick(' + index + ')">';
				checkboxes += '<label for="reading' + index + '">' + value + '</label>';
				checkboxes += '<br>';
			}	
		} 
		function checkboxClick(value) {
			var id = "reading" + value;
			var checkbox = document.getElementById(id);
			if (!checkbox) {
				console.error(`Checkbox with id "${id}" not found`);
				return;
			}
			
			if (checkbox.checked) {
				// hold this in case they check it by mistake.
				var previousReadingLocation = readingLocation;
				createCookie("readingLocation",value,maxExpiration);
			} else {
				// if they are unchecking a check box, set it back to previous
				createCookie("readingLocation",previousReadingLocation,maxExpiration);
			}
			
			readingLocation = readCookie("readingLocation");
		}

		function createCookie(name,value,days) {
			if (days) {
				var date = new Date();
				date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
				var expires = "; expires=" + date.toGMTString();
			} else {
				var expires = "";
			}
			document.cookie = name + "=" + value + expires + "; path=/";
		}

		function readCookie(name) {
			var nameEQ = name + "=";
			var ca = document.cookie.split(';');
			for(var i=0;i < ca.length;i++) {
				var c = ca[i];
				while (c.charAt(0)==' ') {
					c = c.substring(1,c.length);
				}
				if (c.indexOf(nameEQ) == 0) {
					return c.substring(nameEQ.length,c.length);
				}
			}
			return null;
		}

		function eraseCookie(name) {
			createCookie(name,"",-1);
		}
	</script>
</html>