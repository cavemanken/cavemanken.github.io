<html>
	<p id="readingList" style="font-size: 24px;"></p>

	<script src="2YearBibleChronological.js"></script>
	
	<script>
		maxExpiration = 399; // chrome will not allow more than 400 day expiration on cookie
		if (readCookie('readingLocation') == null) {
			alert('no cookie found');
			createCookie("readingLocation",-1,maxExpiration);	
			readingLocation = -1; // do this here since chrome on my desktop is not saving cookies
		} else {
			readingLocation = readCookie("readingLocation");
		}	

		// build the checkboxes	
		let checkboxes = "";
		readings.forEach(buildCheckboxes);
		document.getElementById("readingList").innerHTML = checkboxes;

		function buildCheckboxes(value,index) {
			if (index > readingLocation) {
				checkboxes += '<br><input type="checkbox" id="reading' + index + '" name="reading' + index + '" value="' + value + '" onclick="checkboxClick(' + index + ')">';
				checkboxes += '<label for="reading' + index + '">' + value + '</label>';
				checkboxes += '<br>';
			}	
		} 
		function checkboxClick(value) {
			id = "reading" + value;
			checkbox = document.getElementById(id);
			if (checkbox.checked) {
				// hold this in case they check it by mistake.
				previousReadingLocation = readingLocation;
				createCookie("readingLocation",value,maxExpiration);
			} else {
				// if they are unchecking a check box, set it back to previous
				createCookie("readingLocation",previousReadingLocation,maxExpiration);
			}
			
			readingLocation = readCookie("readingLocation");
		}

		function createCookie(name,value,days) {
			if (days) {
				// chrome no longer allows cookies to be larger than 400, if you try it will set the expiration for 1 week
				if (days > maxExpiration) {
					days = maxExpiration;
				}	
				var date = new Date();
				date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
				var expires = "; expires=" + date.toGMTString();
				alert(date.toGMTString());
			} else {
				var expires = "";
			}
			document.cookie = name + "=" + value + expires + "; path=/";
		}

		function readCookie(name) {
			var nameEQ = name + "=";
			var ca = document.cookie.split(';');
			for(var i=0;i < ca.length;i++) {
				var c = ca[i];
				while (c.charAt(0)==' ') {
					c = c.substring(1,c.length);
				}
				if (c.indexOf(nameEQ) == 0) {
					return c.substring(nameEQ.length,c.length);
				}
			}
			return null;
		}

		function eraseCookie(name) {
			createCookie(name,"",-1);
		}
	</script>
</html>